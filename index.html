<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="ko">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="jjj&#39;s park">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="jjj&#39;s park">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jjj&#39;s park">






  <link rel="canonical" href="http://yoursite.com/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>jjj's park</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="ko">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">jjj's park</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>홈</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>카테고리</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>아카이브</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/14/CI-CD/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/14/CI-CD/" class="post-title-link" itemprop="http://yoursite.com/index.html">CI/CD</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-06-14 10:47:52" itemprop="dateCreated datePublished" datetime="2019-06-14T10:47:52+09:00">2019-06-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-06-17 14:22:38" itemprop="dateModified" datetime="2019-06-17T14:22:38+09:00">2019-06-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/devOps/" itemprop="url" rel="index"><span itemprop="name">devOps</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Jenkins-Gitlab"><a href="#Jenkins-Gitlab" class="headerlink" title="Jenkins + Gitlab"></a>Jenkins + Gitlab</h2><h3 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins:lts</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name jenkins -p 9001:8080 -p 9002:50000 -v /home/tacsadm/jenkins:/var/jenkins_home jenkins/jenkins:lts</span><br></pre></td></tr></table></figure>
<p>가끔 jenkins folder의 권한이 문제가 생길 수 있다. <figure class="highlight plain"><figcaption><span>777</span><a href="/home/tacsadm/jenkins```">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. 초기 비밀번호 입력</span><br><span class="line">2. Install suggested plugins</span><br><span class="line">3. 회원가입, 로그인</span><br><span class="line">   - 가끔 SetupWizard에서 blank 화면이 나올 수 있는데, 그냥 ```docker restart containerId``` 하면된다.</span><br><span class="line">4. gitlab plugin 설치</span><br><span class="line">5. 새작업 - freestyle project</span><br><span class="line">6. 소스코드 관리 - git</span><br><span class="line">   - Credentials를 등록 (gitlab API Token) : gitlab에서 발급받은 token을 이용</span><br><span class="line">   - Username with password 등록</span><br><span class="line">7. 빌드 유발</span><br><span class="line">   - Build when a change is pushed to GitLab. GitLab webhook URL: http://121.156.46.166:9001/project/test-proj</span><br><span class="line">8. Build</span><br><span class="line">   - Execute shell Command 작성</span><br><span class="line">   - 여기서 ./mvnw clean, test.. 같은 작업을 한다.</span><br><span class="line">   - 가끔 webhook은 오는데 build가 안될때가 있다. 이때 webhook을 push event test해서 403 error가 나오면 다음과 같이 대처한다.</span><br><span class="line">     - 빌드유발 - 고급 - Secret token - Generate</span><br><span class="line">     - 발급 받은 token값을 gitlab의 webhook설정에 추가한다.</span><br><span class="line">9. Jenkins 관리 </span><br><span class="line">   - Global Tool Configuration - JDK - Name, JAVA_HOME 설정 (docker - Jenkins 내부의 openjdk 이용)</span><br><span class="line"></span><br><span class="line">### Gitlab</span><br></pre></td></tr></table></figure></p>
<p>docker pull gitlab/gitlab-ce<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```shell</span><br><span class="line">docker run -d --name gitlab -p 443:443 -p 80:80 -p 9022:22 -v /home/tacsadm/gitlab/config:/etc/gitlab -v /home/tacsadm/gitlab/logs:/var/log/gitlab -v /home/tacsadm/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce</span><br></pre></td></tr></table></figure></p>
<ol>
<li>회원가입, 로그인</li>
<li>repository 생성</li>
<li>Push </li>
<li>Settings - Access Tokens - Token 발급</li>
<li>Settings - Integrations - Jenkins 7에서 받은 <a href="http://121.156.46.166:9001/project/test-proj" target="_blank" rel="noopener">http://121.156.46.166:9001/project/test-proj</a> 입력</li>
</ol>
<h3 id="Nexus"><a href="#Nexus" class="headerlink" title="Nexus"></a>Nexus</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name nexus -p 8081:8081 -p 12000:12000 -v /home/tacsadm/nexus/nexus-data:/nexus-data sonatype/nexus3</span><br></pre></td></tr></table></figure>
<ol>
<li><p>기본 ID/Password는 admin / admin1234</p>
</li>
<li><p><a href="http://download.sonatype.com/nexus/ci/latest.hpi" target="_blank" rel="noopener">http://download.sonatype.com/nexus/ci/latest.hpi</a>를 다운 받아 Jenkins plugin을 upload한다.</p>
</li>
<li><p>jenkins의 시스템 설정에서 Sonatype Nexus의 계정 설정을 한다.</p>
</li>
<li><p>jenkins의 project 설정에서 Build - Invoke top-level Maven targets</p>
<ul>
<li>Goals : clean package</li>
</ul>
</li>
<li><p>Nexus Repository Manager Publisher 에서 원하는 형식의 dependency를 설정한다.</p>
<ul>
<li>Artifacts에 build된 파일의 경로를 입력해주는 부분이 있는데, 이는 console out에 나오는 경로를 입력한다.</li>
</ul>
<p><a href="https://support.sonatype.com/hc/en-us/articles/227256688-How-do-I-configure-the-Nexus-Jenkins-Plugin" target="_blank" rel="noopener">https://support.sonatype.com/hc/en-us/articles/227256688-How-do-I-configure-the-Nexus-Jenkins-Plugin</a></p>
</li>
</ol>
<h4 id="Repository-download"><a href="#Repository-download" class="headerlink" title="Repository download"></a>Repository download</h4><p>pom.xml에 repository와 dependency를 추가해 준다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jenkins-ci.main<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jenkins-war<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://121.156.46.166:8081/repository/maven-releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>docker run -d –name sonarqube -p 9004:9000 -p 9092:9092 sonarqube</p>
<p>zBBQKKZ8ci26vxA_RjAt</p>
<p> docker run -d -p 9001:8080 -p 9002:50000 -v /home/tacsadm/jenkins:/var/jenkins_home jenkins/jenkins:lts</p>
<p>docker run -d -p 443:443 -p 80:80 -p 9022:22 -v /home/tacsadm/gitlab/config:/etc/gitlab -v /home/tacsadm/gitlab/logs:/var/log/gitlab -v /home/tacsadm/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/13/Test-0/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/13/Test-0/" class="post-title-link" itemprop="http://yoursite.com/index.html">Test</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-06-13 08:17:18" itemprop="dateCreated datePublished" datetime="2019-06-13T08:17:18+09:00">2019-06-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-06-14 11:25:46" itemprop="dateModified" datetime="2019-06-14T11:25:46+09:00">2019-06-14</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Test/" itemprop="url" rel="index"><span itemprop="name">Test</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>어차피 http에 대한 테스트를 할꺼 코드로 남겨놔서 언제든지 지속적으로 테스트 할 수 있게 하자</li>
<li>단위 테스트를 하면 함수를 작게 만들려고 한다. 하나의 기능을 담당하게 한다.</li>
<li>코드에 어떤 걸 넣으면 어떤게 나오는 지 알려주는 문서를 자동으로 만들게 된다. 다른 사람이 코드를 보기 편하다</li>
</ol>
<h3 id="TDD"><a href="#TDD" class="headerlink" title="TDD"></a>TDD</h3><blockquote>
<p>테스트 코드를 먼저 작성하는 이유</p>
</blockquote>
<p>Junit5</p>
<ul>
<li>그냥 java테스트 도구이다.</li>
<li>그냥 @Test annotation 붙이고, ㅅ</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/12/docker를-이용한-elastic-stack-설치/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/12/docker를-이용한-elastic-stack-설치/" class="post-title-link" itemprop="http://yoursite.com/index.html">docker를 이용한 elastic stack 설치</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-06-12 19:17:30" itemprop="dateCreated datePublished" datetime="2019-06-12T19:17:30+09:00">2019-06-12</time>
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/08/추가내용/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/08/추가내용/" class="post-title-link" itemprop="http://yoursite.com/index.html">추가내용</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-06-08 16:40:36" itemprop="dateCreated datePublished" datetime="2019-06-08T16:40:36+09:00">2019-06-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-06-11 08:50:09" itemprop="dateModified" datetime="2019-06-11T08:50:09+09:00">2019-06-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="JsonView"><a href="#JsonView" class="headerlink" title="@JsonView"></a>@JsonView</h3><ul>
<li>자신이 원하는 response 의 field만 리턴할 수 있게 해줌.</li>
<li>객체에 interface를 선언하고, 객체의 field의 값위위에 @JsonView를 사용하여 적용할 수 있다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="meta">@JsonView</span>(User.WithoutPasswordView.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"eric"</span>, <span class="string">"7!jd#h23"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WithoutPasswordView</span> </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">WithPasswordView</span> <span class="keyword">extends</span> <span class="title">WithoutPasswordView</span> </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonView</span>(WithoutPasswordView.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@JsonView</span>(WithPasswordView.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-httpentity" target="_blank" rel="noopener">https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-httpentity</a></p>
<p>위의 코드처럼 Class에 2가지의 interface를 만들어 getter() method위에 @JsonView를 사용해서 선언을 하고, 선언한 class의 형태를 가진 getter() method의 field값만 반환한다.</p>
<h3 id="ModelAttribute"><a href="#ModelAttribute" class="headerlink" title="@ModelAttribute"></a>@ModelAttribute</h3><p>먼저 @ModelAttribute에 대해 알아야한다. 2가지 역할이 있다.</p>
<ol>
<li>Method위에 붙을 때<ul>
<li>model의 attribute를 추가할 수 있다.</li>
</ul>
</li>
<li>Method의 argument로 붙을 때<ul>
<li>argument의 이름이 Model의 의 이름과 일치한다. 즉 model로 부터 값을 argument의 이름고 같은 값을 가져올 때 사용한다.</li>
</ul>
</li>
</ol>
<p>여기서 말하고 싶은 추가적인 내용은 모든 요청을 실행할 때, model에 공통적인 데이터를 똑같이 넣어서 반환하는 귀찮음을 경험하게되는데 그런 귀찮음을 막아줄 수 있는 방법이다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    자동으로 Model에 담아준다.</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/events/form/name"</span>)</span><br><span class="line"><span class="meta">@ModelAttribute</span> <span class="comment">// 생략가능</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Event <span class="title">eventsFormName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Event();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//    요청에 해당하는 view이름의 view를 불러온다. RequestToViewNameTranslator가</span></span><br></pre></td></tr></table></figure>
<h3 id="데이터바인더-InitBinder"><a href="#데이터바인더-InitBinder" class="headerlink" title="데이터바인더 @InitBinder"></a>데이터바인더 @InitBinder</h3><ul>
<li><p>요청 매개변수(queryParam, formdata)에 쓰이는 데이터를 바인딩할때, 쓰는 바인더를 커스터마이징할 수 있다.</p>
</li>
<li><p>바인딩 설정 - 요청에서 들어오는 parmeter에서 원하는 값만 가져올 수 있다.</p>
</li>
<li><p>Formatter 지원</p>
<p>webDataBinder.addCustomFormatter();</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Event</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@DateTimeFormat</span>(iso = DateTimeFormat.ISO.DATE)</span><br><span class="line">  <span class="keyword">private</span> LocalDate startDate;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이는 위의 annotation을 이해하는 formatter가 이미 등록이 되어 있어서 해석할 수 있다.</p>
<ul>
<li>Validator 설정</li>
<li>@InitBinder(“event”)를 주면 event model객체를 binding 받을 떄에만 InitBinder를 사용할 수 있다.</li>
</ul>
<h3 id="예외-처리-핸들러-ExceptionHandler"><a href="#예외-처리-핸들러-ExceptionHandler" class="headerlink" title="예외 처리 핸들러 @ExceptionHandler"></a>예외 처리 핸들러 @ExceptionHandler</h3><p>MVC에서 어떤 요청에 대해 에러가 발생했을때, 처리해주는 것…? 우리가 정의한 handler로 error를 처리한 후 결과값을 반환해준다. 보통 @ExceptionHandler, @InitBinder, @ModelAttribute를 묶어서 BaseController로 만들어 사용한다.</p>
<p>Exception이 발생했을 때, 이를 처리하는 handler를 만들 수 있다. 그러나 보통 거의 다 만들어져 있어서, error에 대한 추가적인 message만 보낼 때 사용하는 듯하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">eventErrorHandler</span><span class="params">(EventException exception , Model model)</span> </span>&#123;</span><br><span class="line">  model.addAttribute(<span class="string">"message"</span>, <span class="string">"event error"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">runtimeErrorHandler</span><span class="params">(RuntimeException exception , Model model)</span> </span>&#123;</span><br><span class="line">  model.addAttribute(<span class="string">"message"</span>, <span class="string">"runtime  error"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>둘 중 가장 구체적인 EventException이 매핑이 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span>(&#123;EventException.class, RuntimeException.class&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">eventErrorHandler</span><span class="params">(RuntimeException exception , Model model)</span> </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"message"</span>, <span class="string">"event error"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>2가지 error에도 적용할 수 있다.</p>
<p>정리하자면 controller에서 throw Exception을 던지면 @ExceptionHandler로 돌아온다. 그리고 여기서 Exception에 대한 handling을 해줄 수 있다.</p>
<p>RestAPI를 설계할때, error에 대한 message를 출력할 떄가 있으므로 다음과 같이 처리할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity <span class="title">errorHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> ResponseEntity.badRequest().body(<span class="string">"can't create event as ..."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="전역컨트롤러-ControllerAdvice"><a href="#전역컨트롤러-ControllerAdvice" class="headerlink" title="전역컨트롤러 @ControllerAdvice"></a>전역컨트롤러 @ControllerAdvice</h3><ul>
<li>@ExceptionHandler</li>
<li>@InitBinder</li>
<li>@ModelAttributes</li>
</ul>
<p>를 모든 컨트롤러에 적용하고 싶을때 사용한다.</p>
<p>보통 BaseController(@ExceptionHandler, @InitBinder, @ModlerAttribute)를 만들고 이를 적용하고 싶은 Controller 혹은 모든 Controller에 적용할때 @ControllerAdvice를 사용한다.</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/Handler-Method/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/24/Handler-Method/" class="post-title-link" itemprop="http://yoursite.com/index.html">Handler Method</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-24 08:07:14" itemprop="dateCreated datePublished" datetime="2019-05-24T08:07:14+09:00">2019-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-06-14 18:57:52" itemprop="dateModified" datetime="2019-06-14T18:57:52+09:00">2019-06-14</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Spring-framework/" itemprop="url" rel="index"><span itemprop="name">Spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Handler-Method-Controller-method"><a href="#Handler-Method-Controller-method" class="headerlink" title="Handler Method(Controller method)"></a>Handler Method(Controller method)</h2><h3 id="1-Argument-amp-Return-type"><a href="#1-Argument-amp-Return-type" class="headerlink" title="1. Argument &amp; Return type"></a>1. Argument &amp; Return type</h3><h4 id="Argument"><a href="#Argument" class="headerlink" title="Argument"></a>Argument</h4><ul>
<li>NativeWebRequest, </li>
<li>WebRequest</li>
<li>HttpServletRequest, HttpServletResponse<ul>
<li>RequestBody에 있는 거는 request.getReader(InputStream requestBody, OutputStream responseBobyd)</li>
</ul>
</li>
<li>PushBuilder - 일반적으로 한번 요청이 들어왔을때, 보여주는 브라우져는 필요한 img를 다시 요청한다. 하지만 PushBuilder를 사용하면 서버가 능동적으로 img를 반환한다.</li>
<li>HttpMethod - 요청의 http method를 알 수 있다.<ul>
<li>@RequestMethod를 사용할 때, 모든 method를 사용할 수 있으므로</li>
</ul>
</li>
<li>Locale, TimeZone, ZoneId - LocalResolver를 이용해서 처리함.</li>
</ul>
<hr>
<ul>
<li>@PathVariable</li>
<li>@RequestPart - 파일 </li>
<li>@ModelAttribute - 추후에 설명</li>
<li>@SessionAttribute</li>
<li>UriComponentBuilder - utility…</li>
<li>@MatrixVariable - key/value 쌍을 URI에 적용하는 방안</li>
</ul>
<h4 id="Return-type"><a href="#Return-type" class="headerlink" title="Return type"></a>Return type</h4><ul>
<li>ResponseEntity<string> events() - 응답헤더 , 응답 코드에 대한 것을 추가해줄 수 있다. Rest…?</string></li>
<li>HttpHeaders</li>
<li>View - viewResolver를 타지않고, view를 찾는다.</li>
<li>Model - model정보만 넘긴다. 그래서 view를 모르니까 view를 유추한다…?</li>
</ul>
<h3 id="2-URI-패턴"><a href="#2-URI-패턴" class="headerlink" title="2. URI 패턴"></a>2. URI 패턴</h3><ul>
<li>@PathVariable</li>
<li>@MatrixVariable</li>
</ul>
<h3 id="3-요청매개변수"><a href="#3-요청매개변수" class="headerlink" title="3. 요청매개변수"></a>3. 요청매개변수</h3><ul>
<li>queryParm<ul>
<li>@RequestParam(생략도 가능)</li>
</ul>
</li>
<li>formData</li>
</ul>
<h3 id="4-폼-서브밋"><a href="#4-폼-서브밋" class="headerlink" title="4. 폼 서브밋"></a>4. 폼 서브밋</h3><h3 id="5-ModelAttribute"><a href="#5-ModelAttribute" class="headerlink" title="5. @ModelAttribute"></a>5. @ModelAttribute</h3><ul>
<li>요청에 들어있는 data를 가져온다.</li>
<li>/event?name=jjjpark</li>
<li>/event/name/{name} 등 여러가지 바인딩이 가능하다.</li>
</ul>
<h3 id="6-Validated"><a href="#6-Validated" class="headerlink" title="6. @Validated"></a>6. @Validated</h3><ul>
<li>그룹으로 validation 체크를 할 수 있다.</li>
</ul>
<h3 id="7-폼-서브밋-에러"><a href="#7-폼-서브밋-에러" class="headerlink" title="7. 폼 서브밋 에러"></a>7. 폼 서브밋 에러</h3><h3 id="8-SessionAttributes"><a href="#8-SessionAttributes" class="headerlink" title="8. @SessionAttributes"></a>8. @SessionAttributes</h3><p>자동으로 model에 있는 attribute중에 @SessionAttributes(“”) “”에 선언된 attribute를 session에 넣어준다.</p>
<ul>
<li>장바구니 데이터</li>
<li>데이터 생성시 여러화면에 거쳐서 만들게 되는 경우</li>
<li>데이터가 생성될때(POST)일때 데이터가 생성되는 시간을 넣어줄 수 도 있을것 같다…</li>
</ul>
<p>SessionStatus를 handler의 param으로 주어 session의 정리를 할 수 있다. 예를 들어 여러페이지에 걸쳐서 만들어진 데이터가 완전 저장되어 더이상 session에 갖고 있지 않아도 되는경우</p>
<ul>
<li>비울때 sessionStatus.setComplete(); 를 사용할 수 있다.</li>
<li>Session을 사용하여 사용자의 정보를 계속 담고 있을 수 있다.</li>
</ul>
<h3 id="10-SessionAttribute"><a href="#10-SessionAttribute" class="headerlink" title="10. @SessionAttribute"></a>10. @SessionAttribute</h3><p>@SessionAttribute’s’는 Controller class 안에서만 Session을 정의해서 사용한다. SessionStatus로 Session을 관리한다.(여러 Controller에서 적용되지는 않는다.)</p>
<p>@SessionAttribute는 범용적일떄 사용한다. Interceptor나 뭐 이럴 때… 한번 session에 기록된것은 변하지 않는다.</p>
<h3 id="11-RedirectAttributes"><a href="#11-RedirectAttributes" class="headerlink" title="11. RedirectAttributes"></a>11. RedirectAttributes</h3><p>form에서 값을 작성하고 다른 페이지로 데이터를 넘기는 방법으로는 (리다이렉트) model에 담은 후 Spring 설정값을 바꾸어 RequestParam에 나타나게한다. 하지만 이는 model에 있는 데이터를 모두 보여준다. 내가 보여주고 싶은 값만 바꾸고 싶으면 RedirectAttributes를 사용한다.</p>
<p>받을때는 @RequestParam, Model 둘중 선택해서 받으면 된다.</p>
<p>받을때 주의할점이 @ModelAttribute를 사용할경우 Controller 상단에서 선언한 @SessionAttributes의 (“value”) 값과 @ModelAttribute로 선언한 “value”를 똑같은 이름으로 쓰면 안된다. @ModelAttriubte의 이름과 @SessionAttributes의 이름이 같다면 model을 Session에서 찾기 때문이다.</p>
<h3 id="12-FlashAttributes"><a href="#12-FlashAttributes" class="headerlink" title="12. FlashAttributes"></a>12. FlashAttributes</h3><p>RedirectAttributes - queryParam으로 데이터를 전달하기 때문에 모두 문자열로 변환이 가능해야된다. 복합적이 객체전달은 어렵다.</p>
<p>FalshAttributes - 1회성으로 사용한다. 객체를 전달할 수 있다. httpSession으로 전달되기 때문에 URI경로에 노출되지 않는다.</p>
<h3 id="13-MulipartFile"><a href="#13-MulipartFile" class="headerlink" title="13. MulipartFile"></a>13. MulipartFile</h3><p>이걸 사용하려면 DispatcherServlet에 선언이 되어있어야 한다. MultipartResolver를 선언 즉, 선언하지 않으면 설정하지 않는다. 하지만 Spring boot는 설정이 되어있다. (MultipartAutoConfiguration) </p>
<h3 id="14-ResponseEntity"><a href="#14-ResponseEntity" class="headerlink" title="14. ResponseEntity"></a>14. ResponseEntity</h3><h3 id="15-RequestBody-amp-HttpEntitiy"><a href="#15-RequestBody-amp-HttpEntitiy" class="headerlink" title="15. @RequestBody &amp; HttpEntitiy"></a>15. @RequestBody &amp; HttpEntitiy</h3><p>요청이 객체로 들어올때, 미리 만들어둔 객체로 형식을 바꿔줄 수 있는데, 이를 HttpMessageConverter가 역할을 한다.<br>@EnableWebMvc를 붙여야하는데, 이를 붙이는 순간 기본적인 컨버터들을 못쓴다. 요청의 헤더에 Content-type이 있는데 이를 보고 어떤 형식이다~ 라고 이해한 후 그에 맞는 컨버터를 이용한다.</p>
<p>BindingResult bindingResult를 붙이면 binding error가 생기면 우리가 원하는 처리를 할 수 있다. 무조건 400 error만 주는 것이 아니라… 좀 더 친절한 서버개발자가 된다.</p>
<h3 id="16-ResponseBody-amp-ResponseEntity"><a href="#16-ResponseBody-amp-ResponseEntity" class="headerlink" title="16. @ResponseBody &amp; ResponseEntity"></a>16. @ResponseBody &amp; ResponseEntity</h3><p>@ResponseBody - HttpMessageConverter를 이용해서 응답 본문에 return값을 담아준다.</p>
<p>Accept - 반환을 원하는 리턴타입의 형식</p>
<p>Meta annotation - 어떤 annotation위에 붙어서 사용됨…?</p>
<ul>
<li>meta data - 데이터에 관한 데이터<ul>
<li>meta는 어떤 추상화를 한것을 일컷는다. <ul>
<li>그러므로 meta annotataion은 annotation에 대한 데이터를 말하고, 이는 예를 들어 @Service의 안에 meta annotation으로 있는 @Component를 들 수 있다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ResponseEntity - 결과 값을 넣어줄 형식을 만들어 준다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ResponseEntity&lt;Event&gt; <span class="title">getEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  Event event = <span class="keyword">new</span> Event();</span><br><span class="line">  event.setName(<span class="string">"hoon"</span>);</span><br><span class="line">  event.setLimit(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(event, HttpStatus.OK);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>다음과 같이 결과값에 상태코드를 넣어 줄 수 있다.</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/20/요청-매핑하기/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/20/요청-매핑하기/" class="post-title-link" itemprop="http://yoursite.com/index.html">요청 매핑하기</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-20 22:33:47" itemprop="dateCreated datePublished" datetime="2019-05-20T22:33:47+09:00">2019-05-20</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-05-29 09:00:03" itemprop="dateModified" datetime="2019-05-29T09:00:03+09:00">2019-05-29</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>DispatcherServlet이 요청을 받아서 처리할 핸들러를 찾아주고 하는 일련의 과정</p>
<h3 id="1-요청-메소드"><a href="#1-요청-메소드" class="headerlink" title="1. 요청 메소드"></a>1. 요청 메소드</h3><p>GET</p>
<ul>
<li>Get요청은 캐싱할 수 있다. 조건에 따라 304 - 서버가 body에 넣어서 보내지 않더라도</li>
<li>idemponent - 동일한 요청에 따라 동일한 응답을 리턴해야한다.</li>
</ul>
<p>POST</p>
<ul>
<li>URI는 post에 실어보내는 데이터를 처리할 수 있는 리소스</li>
<li>리소스를 새로 만들거나 수정하므로…</li>
<li>idemponent하지않을 수 있다. - 같은 요청을 하더라도 결과 값이 달라질 수 있다.</li>
<li>데이터 길이제한이 없다.</li>
</ul>
<p>PUT</p>
<ul>
<li>URI는 리소스 자체를 지칭한다.?</li>
<li>POST, PUT은 URI의 의미가 서로 다르다…</li>
<li>idemponent하다</li>
</ul>
<p>POST? PUT 차이점???</p>
<p>PATCH</p>
<ul>
<li>PUT과 비슷하지만, 기존 서버데이터와 put요청에 실어서 보내는 데이터의 차이점만 찾아서 보낸다? 일부의 데이터가 바뀔때는 PATCH…??</li>
</ul>
<p>DELETE</p>
<h3 id="2-URI-패턴-매핑"><a href="#2-URI-패턴-매핑" class="headerlink" title="2. URI 패턴 매핑"></a>2. URI 패턴 매핑</h3><p>@RequestMapping</p>
<ul>
<li>/author/?? : 2개의 글자</li>
<li>/author/* : 여러 글자</li>
<li>/author/** : 여러 path</li>
</ul>
<p>정규표현식으로도 매핑할 수 있다.</p>
<ul>
<li>/{name:정규식}</li>
</ul>
<p>URI확장자 매핑은 spring boot에서 지원하지 않는다. 확장자 매핑은 브라우져가 자동으로 파일 다운로드를 하게 만든다. 그래서 RFD Attack에 취약하다. (URL 클릭으로 악성코드를 내려받게함..)</p>
<h3 id="3-미디어-타입-매핑"><a href="#3-미디어-타입-매핑" class="headerlink" title="3. 미디어 타입 매핑"></a>3. 미디어 타입 매핑</h3><h4 id="특정-타입의-데이터를-담고있는-요청만-처리"><a href="#특정-타입의-데이터를-담고있는-요청만-처리" class="headerlink" title="특정 타입의 데이터를 담고있는 요청만 처리"></a>특정 타입의 데이터를 담고있는 요청만 처리</h4><ul>
<li>@RequestMapping(<strong>consumes</strong>=MediaType.APPLICATION_JSON_UTF8_VALUE)</li>
<li>Content-Type</li>
</ul>
<h4 id="특정-타입의-응답을-만드는-핸들러"><a href="#특정-타입의-응답을-만드는-핸들러" class="headerlink" title="특정 타입의 응답을 만드는 핸들러"></a>특정 타입의 응답을 만드는 핸들러</h4><ul>
<li>@RequestMapping(<strong>produces</strong>=”application/json”)</li>
</ul>
<h3 id="4-헤더와-매개변수-매핑하기"><a href="#4-헤더와-매개변수-매핑하기" class="headerlink" title="4. 헤더와 매개변수 매핑하기"></a>4. 헤더와 매개변수 매핑하기</h3><p>consumes, produces와 다르게 좀 더 일반적인 방법이다.</p>
<h3 id="SampleController-java"><a href="#SampleController-java" class="headerlink" title="SampleController.java"></a>SampleController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/hello"</span>, headers = HttpHeaders.CONTENT_TYPE +<span class="string">"="</span>+<span class="string">"application/json"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello jjjpark"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SampleControllerTest-java"><a href="#SampleControllerTest-java" class="headerlink" title="SampleControllerTest.java"></a>SampleControllerTest.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@WebMvcTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleControllerTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">helloTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        mockMvc.perform(get(<span class="string">"/hello"</span>).contentType(MediaType.APPLICATION_JSON_UTF8))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HttpHeaders.CONTENT_TYPE는 consumes로 바꿀 수 있고,<br>HttpHeaders.ACCEPT는 produces로 바꿀 수 있다.</p>
<p>consumes는 요청을 받을때, Content-type이 맞는 요청만 받는 다는 뜻이고, produces는 요청에 대한 결과를 반환할때, Accept의 형식으로 반환한다는 의미이다.</p>
<h2 id="커스텀-annotation"><a href="#커스텀-annotation" class="headerlink" title="커스텀 annotation"></a>커스텀 annotation</h2><p>annotation위에 사용할 수 있는 annotation을 meta annotation</p>
<p>runtime시에 annotation은 사라진다.</p>
<p>@Retention - 언제까지 정보를 가지고 있을 것인가? (java의 annotation)</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/20/설정 spring-MVC-설정-정리/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/20/설정 spring-MVC-설정-정리/" class="post-title-link" itemprop="http://yoursite.com/index.html">spring MVC 설정 정리</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-20 08:43:23 / Updated at: 09:03:23" itemprop="dateCreated datePublished" datetime="2019-05-20T08:43:23+09:00">2019-05-20</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>우리가 SpringMVC를 사용하려면 여러가지 필요한 설정들이 있다. 예를들어</p>
<ul>
<li>요청에 대해 body를 객체로 변환한다.(MessageConverter)</li>
<li>요청에 대해 미리 처리를 한다…(HandlerInterceptor)</li>
<li>등등</li>
</ul>
<p>이를 위해서는 handlerInterceptor을 HandlerMapping에 등록해주어야 하고, messageConverter를 HandlerAdapter에 등록해야한다. </p>
<p>이런걸 쉽게 작성할수 있게끔 @EnableWebMvc 를 사용한다. 이는 기본적인 Spring MVC에서 제공하는 설정을 사용하지 않는 다는 뜻이다 경우에 따라 커스터마이징 하고싶은 경우가 있는데, 그때 WebMvcConfigurer을 implements해서 구현 한다. </p>
<p>Spring boot는 자동설정으로 인해 다양한 기능이 제공된다. JSON지원,(HttpMessageConverter가 자동으로 등록) Spring boot도 마찬가지고 WebMvcConfigurer을 통해 커스터마이징할 수 있다. 하지만 @EnableWebMvc를 사용하면 Spring boot의 설정을 아무것도 사용하지 않게 된다. 우선은 application.properties에서 key/value를 조정해서 설정을 조절할 수 있는지 먼저 확인한다. 직접 @Bean을 등록을 할 수도 있지만 그렇게 보통하지는 않는다. </p>
<ol>
<li>application.properties</li>
<li>WebMvcConfigurer</li>
<li>@Bean으로 직접 설정값을 등록</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/17/WebMvcConfigurer/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/17/WebMvcConfigurer/" class="post-title-link" itemprop="http://yoursite.com/index.html">WebMvcConfigurer</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-17 23:18:40" itemprop="dateCreated datePublished" datetime="2019-05-17T23:18:40+09:00">2019-05-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-05-20 09:03:26" itemprop="dateModified" datetime="2019-05-20T09:03:26+09:00">2019-05-20</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>addFormatter()</li>
<li>addResourceHandler</li>
<li>configureMessageConverter, extendMessageConverter</li>
<li>기본 Converter(jackson…)을 활성화 하는 방법</li>
</ul>
<ul>
<li><p>addArgumentResolvers()</p>
</li>
<li><p>returnValueHandler() : handler에서 리턴하는 값들을 제어하는 handler</p>
</li>
<li><p>addViewControllers()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/17/HTTP-메시지-컨버터/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/17/HTTP-메시지-컨버터/" class="post-title-link" itemprop="http://yoursite.com/index.html">HTTP 메시지 컨버터</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-17 18:37:03 / Updated at: 19:29:13" itemprop="dateCreated datePublished" datetime="2019-05-17T18:37:03+09:00">2019-05-17</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>HTTP Message converter는 @RequestBody로 들어온 객체에 대해 json, xml 등의 형식으로 convert해준다. 그리고 반환하는 값도 또 한 convert할수 있다. 스프링 부트는 Jackson2를 기본적으로 추가해준다. (ObjectMapper)</p>
</blockquote>
<h3 id="SampleController-java"><a href="#SampleController-java" class="headerlink" title="SampleController.java"></a>SampleController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/jsonMessage"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">jsonMessage</span><span class="params">(@RequestBody Person person)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SampleControllerTest-java"><a href="#SampleControllerTest-java" class="headerlink" title="SampleControllerTest.java"></a>SampleControllerTest.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fas..</span><br><span class="line">  </span><br><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    PersonRepository personRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">  	<span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jsonMessage</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        person.setId(<span class="number">2019l</span>);</span><br><span class="line">        person.setName(<span class="string">"jonghoon"</span>);</span><br><span class="line"></span><br><span class="line">        String jsonString = objectMapper.writeValueAsString(person);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.mockMvc.perform(get(<span class="string">"/jsonMessage"</span>)</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">                .accept(MediaType.APPLICATION_JSON_VALUE)</span><br><span class="line">                .content(jsonString))</span><br><span class="line">                .andDo(print())</span><br><span class="line">                .andExpect(status().isOk());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>this.mockMvc.perform()에 HTTP요청에 대한 정보가 들어간다. Content-type요청이 보내는 body의 형식을 의미한다. 여기서는 application/json이다. 그리고 .accept()는 요청이 결과로 얻고 싶은 데이터의 형식을 의미한다.</p>
<p>이게 왜 중요하냐면 spring boot는 이 형식을 보고 어떤 converter를 bean으로 등록해줄지 결정하기 때문이다.</p>
<ul>
<li>MvcConfigurationSupport : 각 converter가 있으면 알아서 messageConverter를 등록해준다. classpath에 라이브러리가 있는 경우에만. </li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/17/설정 Resource-Handler/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jonghun.park">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jjj's park">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/17/설정 Resource-Handler/" class="post-title-link" itemprop="http://yoursite.com/index.html">Resource Handler</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              

              
                
              

              <time title="Post created: 2019-05-17 08:17:43 / Updated at: 08:58:11" itemprop="dateCreated datePublished" datetime="2019-05-17T08:17:43+09:00">2019-05-17</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/spring-framework/" itemprop="url" rel="index"><span itemprop="name">spring framework</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Html, img, css와 같은 정적파일들을 제공하는 것.</p>
<p>정적인 자원을 처리하는 default Servlet이 있다.</p>
<p>Spring은 default</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/mobile/**"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/mobile/"</span>)</span><br><span class="line"><span class="comment">//                .setCacheControl(CacheControl.maxAge(10, TimeUnit.MINUTES)) // resource를 10분동안 캐싱한다.</span></span><br><span class="line">                .resourceChain(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>WebConfig를 위와 같이 설정하여 Resource handler를 사용할 수 있다. Cache 여부도 설정할 수 있다. 이는 web에서 정적파일 요청이 왔을때, 기존에 있는걸 캐싱해놓으면, 304를 반환하여 기존의 정적파일과 변화가 없음을 알려준다. </p>
<p>이걸 왜사용하느냐면, 정적파일에 대한 캐싱여부 등 Resource에 대한 handling을 하려고 쓰는 것같다.</p>

          
        
      
    </div>

    

    
    
    

    

    
       
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">jonghun.park</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">포스트</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">카테고리</span>
                  
                </div>
              

              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/jjjpark" title="GitHub &rarr; https://github.com/jjjpark" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:wecube.1@gmail.com" title="E-Mail &rarr; mailto:wecube.1@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jonghun.park</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v6.5.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  





  

  

  

  

  

  
  

  

  

  

  

  

  

</body>
</html>
